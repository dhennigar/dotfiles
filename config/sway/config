# Sway configuration file
# Daniel Hennigar

include /etc/sway/config.d/*
include ~/.config/sway/config.d/*

# Settings
xwayland force
focus_wrapping no
focus_follows_mouse no
mouse_warping output
focus_on_window_activation urgent

# Wallpaper and screen locker
output * bg "~/Pictures/Wallpapers/octopus.jpg" fill
set $laptop eDP-1
bindswitch --reload --locked lid:on output $laptop disable
bindswitch --reload --locked lid:off output $laptop enable
exec_always i3-clam-shell
exec swayidle -w \
     timeout 300 'swaylock -f -c "#000000"' \
     timeout 10 'if pgrep -x swaylock; then swaymsg "output * power off; fi"' \
     resume 'swaymsg "output * power on' \
     before-sleep 'playerctl pause; swaylock -c "#000000"'


# Inputs
input type:touchpad {
	dwt enabled
	tap enabled
	scroll_method two_finger
	natural_scroll enabled
	tap_button_map lrm
	pointer_accel 0.5
}
input "2:10:TPPS/2_Elan_TrackPoint" {
	dwt enabled
	dwtp enabled
	click_method clickfinger
	natural_scroll disabled
	pointer_accel 0.3
	scroll_method on_button_down
	scroll_button button2
}
input type:keyboard {
	repeat_delay 190
	repeat_rate 40
	xkb_numlock enabled
	xkb_capslock disabled
}

# Swaynag
swaynag_command swaynagmode
set $nag exec swaynagmode
mode "nag" {
  bindsym {
    Ctrl+d    mode "default"

    Ctrl+g    $nag --exit
    Escape    $nag --exit

    Return    $nag --confirm

    Tab       $nag --select prev
    Shift+Tab $nag --select next
  }
}

# Keybindings
set $mod Mod4
floating_modifier $mod normal

bindsym $mod+Delete kill
bindsym Mod1+Ctrl+Delete $nag -t warning -m 'Do you really want to exit sway?' -B 'Yes, exit sway' 'swaymsg exit'

bindsym $mod+Mod1+r exec "swaymsg reload && kanshictl reload"

bindsym $mod+l exec swaylock -c #000000

bindsym $mod+Backspace exec fnottctl dismiss

# Menus
bindsym $mod+r exec fuzzel
bindsym $mod+Mod1+t exec select-theme.sh
bindsym $mod+g exec i3-select-window
bindsym $mod+slash exec i3-file-picker
bindsym $mod+Mod1+slash exec i3-file-picker --show-hidden

bindsym Print exec grim -g $(slurp)

bindsym $mod+t exec alacritty
bindsym $mod+f exec thunar

bindsym $mod+w exec i3-run-or-raise firefox firefox
bindsym $mod+e exec i3-run-or-raise emacs "emacsclient -c"

bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

bindsym F11 fullscreen
bindsym F12 floating toggle

# triggers focus cycling if i3-cycle-focus is running
bindsym Mod1+Tab exec swaymsg -t send_tick cycle-focus
bindsym Mod1+Shift+Tab exec swaymsg -t send_tick cycle-focus-reverse
bindsym $mod+o exec swaymsg -t send_tick cycle-focus
bindsym $mod+b exec swaymsg -t send_tick cycle-focus-reverse

bindsym $mod+n workspace next
bindsym $mod+p workspace prev
bindsym $mod+Shift+n move to workspace next, workspace next
bindsym $mod+Shift+p move to workspace prev, workspace next
bindsym $mod+a exec i3-new-workspace
bindsym $mod+Shift+a exec i3-new-workspace -t

bindsym $mod+Mod1+c [con_mark=caffeinated] inhibit_idle none; \
	   inhibit_idle open, mark --add caffeinated
bindsym $mod+Shift+c [con_mark=caffeinated] inhibit_idle none, \
	   mark --add --toggle caffeinated
for_window [con_mark=caffeinated] inhibit_idle open

bindsym $mod+m [con_mark=mark] focus
bindsym $mod+Shift+m [con_mark=mark] move to workspace current, focus
bindsym $mod+Mod1+m mark --add mark

bindsym --locked XF86AudioPlay exec playerctl play
bindsym --locked XF86AudioPause exec playerctl pause
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous
bindsym --locked XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym --locked XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym --locked XF86AudioRaiseVolume exec wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindsym --locked XF86AudioLowerVolume exec wpctl set-volume  @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86MonBrightnessUp exec brightnessctl s +5%
bindsym XF86MonBrightnessDown exec brightnessctl s 5%-
bindsym XF86WLAN exec rfkill block all
bindsym XF86Display exec kanshictl reload

# floating windows
for_window {
	   [class="R_x11"] floating enable
	   [app_id="pavucontrol"] floating enable
	   [title="^.*\.html" class="Google-chrome"] floating enable
	   [title="Save File"] floating enable
	   [app_id="Zotero" title="Progress"] floating enable
}

# scratchpad windows
for_window [app_id="qalculate"] move to scratchpad
bindsym $mod+equal scratchpad show

#client			     #border   #bg       #text     #indicator
client.focused		     "#3660d0" "#3660d0" "#FFFFFF" "#4670e0"
client.focused_inactive	     "#999999" "#999999" "#000000" "#999999"
client.unfocused	     "#888888" "#888888" "#000000" "#888888"
client.urgent		     "#ff0000" "#ff0000" "#000000" "#ff0000"
font "Iosevka Comfy 10"

# Startup processes
exec systemctl --user import-environment PATH
exec systemctl --user import-environment WAYLAND_DISPLAY

exec gsettings set org.gnome.desktop.interface gtk-theme Mint-Yz-Base-Grey
exec gsettings set org.gnome.desktop.interface icon-theme Papirus
exec gsettings set org.gnome.desktop.interface font-name "IBM Plex Sans"
exec gsettings set org.gtk.Settings.FileChooser location-mode filename-entry

exec i3-title-status --warning
exec i3-cycle-focus
exec autotiling
exec kanshi
exec mako
exec gammastep

exec qalculate-gtk
exec emacs --daemon
exec thunar --daemon

# Local Variables:
# mode: i3wm-config
# End:
